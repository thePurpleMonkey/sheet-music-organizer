<!DOCTYPE html>
<html>
	<head>
		<title>Test</title>
	</head>
	<body>
		<div class="container">
			<form>
				<div class="form-group">
				<label for="email">Email address</label>
				<input type="email" class="form-control" id="email" placeholder="Enter email">
				</div>
				<div class="form-group">
				<label for="password">Password</label>
				<input type="password" class="form-control" id="password" placeholder="Password">
				</div>
				<div class="form-group">
				<label for="name">Preferred name</label>
				<input type="text" class="form-control" id="name" placeholder="Preferred name">
				</div>
				<button type="button" class="btn" id="login">Login</button>
				<button type="button" class="btn" id="secret">Secret</button>
				<button type="button" class="btn" id="logout">Logout</button>
				<button type="button" class="btn" id="register">Register</button>
			</form>
		</div>
		
		<script>
			$("#login").click(function() {
				$.post( "/user/login", JSON.stringify({ email: $("#email").val(), password: $("#password").val() }) )
					.done(function( data ) {
						alert("Authentication success.");
					})
					.fail(function( data ) {
						alert("Authentication failed!\n" + data.responseJSON.error);
						console.log(data.responseJSON)
					});
			});
			
			$("#logout").click(function() {
				$.get("/user/logout")
					.done(function( data ) {
						alert("Logout success.");
					})
					.fail(function( data ) {
						alert("Logout failed!\n" + data.responseJSON.error);
						console.log(data.responseJSON)
					});
			});
			
			$("#secret").click(function() {
				$.get("/secret")
					.done(function( data ) {
						alert("Secret retrieved: " + data);
						console.log(data)
					})
					.fail(function( data ) {
						alert("Unable to retrieve secret!");
					});
			});
			
			$("#register").click(function() {
				$.post( "/user/register", JSON.stringify({ email: $("#email").val(), password: $("#password").val(), name: $("#name").val() }) )
					.done(function( data ) {
						alert("Registration successful.");
					})
					.fail(function( data ) {
						alert("Registration failed!\n" + data.responseJSON.error);
						console.log(data.responseJSON)
					});
			});
		</script>
	</body>
</html>